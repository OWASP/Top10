{"version":3,"sources":["../src/MapLike.js"],"names":[],"mappings":"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","file":"MapLike.js","sourcesContent":["// LICENSE : MIT\n\"use strict\";\n// constants\nconst NanSymbolMark = {};\n\nfunction encodeKey(key) {\n    const isNotNumber = typeof key === \"number\" && key !== key;\n    return isNotNumber ? NanSymbolMark : key;\n}\n\nfunction decodeKey(encodedKey) {\n    return (encodedKey === NanSymbolMark) ? NaN : encodedKey;\n}\n\n/**\n * ES6 Map like object.\n * See [Map - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map \"Map - JavaScript | MDN\")\n */\nexport class MapLike {\n    constructor(entries = []) {\n        /**\n         * @type {Array}\n         * @private\n         */\n        this._keys = [];\n        /**\n         *\n         * @type {Array}\n         * @private\n         */\n        this._values = [];\n        entries.forEach(entry => {\n            if (!Array.isArray(entry)) {\n                throw new Error(\"should be `new MapLike([ [key, value] ])`\");\n            }\n            if (entry.length !== 2) {\n                throw new Error(\"should be `new MapLike([ [key, value] ])`\");\n            }\n            this.set(entry[0], entry[1]);\n        });\n    }\n\n    /**\n     * return map size\n     * @returns {Number}\n     */\n    get size() {\n        return this._values.filter(value => value !== undefined).length;\n    }\n\n    /**\n     * entries [[key, value], [key, value]] value\n     * @returns {Array}\n     */\n    entries() {\n        return this.keys().map(key => {\n            var value = this.get(key);\n            return [decodeKey(key), value];\n        });\n    }\n\n    /**\n     * get keys\n     * @returns {Array}\n     */\n    keys() {\n        return this._keys.filter(value => value !== undefined).map(decodeKey);\n    }\n\n    /**\n     * get values\n     * @returns {Array}\n     */\n    values() {\n        return this._values.slice();\n    }\n\n    /**\n     * @param {*} key - The key of the element to return from the Map object.\n     * @returns {*}\n     */\n    get(key) {\n        const idx = this._keys.indexOf(encodeKey(key));\n        return (idx !== -1) ? this._values[idx] : undefined;\n    }\n\n\n    /**\n     * has value of key\n     * @param {*} key - The key of the element to return from the Map object.\n     * @returns {boolean}\n     */\n    has(key) {\n        return (this._keys.indexOf(encodeKey(key)) !== -1);\n    }\n\n\n    /**\n     * set value for key\n     * @param {*} key - The key of the element to return from the Map object.\n     * @param {*} value\n     * @return {MapLike}\n     */\n    set(key, value) {\n        const idx = this._keys.indexOf(encodeKey(key));\n        if (idx !== -1) {\n            this._values[idx] = value;\n        } else {\n            this._keys.push(encodeKey(key));\n            this._values.push(value);\n        }\n        return this;\n    }\n\n    /**\n     * delete value for key\n     * @param {*} key - The key of the element to return from the Map object.\n     * @returns {boolean}\n     */\n    delete(key) {\n        const idx = this._keys.indexOf(encodeKey(key));\n        if (idx === -1) {\n            return false;\n        }\n        this._keys.splice(idx, 1);\n        this._values.splice(idx, 1);\n        return true;\n    }\n\n    /**\n     * clear defined key,value\n     * @returns {MapLike}\n     */\n    clear() {\n        this._keys = [];\n        this._values = [];\n        return this;\n    }\n\n    /**\n     * forEach map\n     * @param {function(value, key, map)} handler\n     * @param {*} [thisArg]\n     */\n    forEach(handler, thisArg) {\n        this.keys().forEach(key => {\n            // value, key, map\n            handler(this.get(key), key, thisArg || this);\n        });\n    }\n}"]}