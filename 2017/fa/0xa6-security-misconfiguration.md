# <div dir="rtl" align="right">A6:2017 پیکربندی اشتباه امنیتی </div>

| Threat agents/Attack vectors | Security Weakness           | Impacts               |
| -- | -- | -- |
| Access Lvl : قابلیت بهره‌برداری: ۳ | شیوع: ۳ : قابل کشف بودن: ۳ | تکنیکی: ۲ : Business ? |
| <div dir="rtl" align="right">مهاجمان اغلب سعی می‌کنند از نقص های وصله نشده بهره ببرند یا به حساب‌های پیش‌فرض، صفحات استفاده نشده، فایل ها و پوشه های محافظت نشده و غیره دسترسی پیدا کنند، تا دسترسی غیرمجاز به سیستم یا دانش آن را کسب کنند.</div> | <div dir="rtl" align="right">پیکربندی اشتباه امنیتی ممکن است در هر سطحی از یک برنامه کاربردی مثل سرویس‌های شبکه، پلتفرم، سرور وب، سرور برنامه، پایگاه داده، چارچوب ها، کد سفارشی و ماشین های مجازی، و فضای ذخیره‌سازی رخ دهد. اسکنرهای خودکار برای تشخیص پیکربندی‌های اشتباه، استفاده از حساب های پیش‌فرض، خدمات غیرضروری و غیره مفید هستند.</div> | <div dir="rtl" align="right">چنین نقص‌هایی اغلب دسترسی غیرمجاز به برخی از داده‌های سیستم یا عملکرد سیستم را به مهاجم می‌دهد. گاهی اوقات چنین نقصی باعث گرفتن دسترسی کامل از سیستم می‌شود.تأثیر کسب و کار بستگی به نیازهای حفاظت از برنامه و داده ها دارد.</div> |

## <div dir="rtl" align="right">آیا برنامه کاربردی آسیب پذیر است ؟</div>

<p dir="rtl" align="right">برنامه ممکن است آسیب پذیر باشد اگر:</p>

<ul dir="rtl" align="right">
  <li>
گسستن امنیت مناسب در هر بخشی از پشته برنامه، و یا مجوز نادرست پیکربندی شده در خدمات ابری.
  </li>
  <li>
ویژگی های غیر ضروری فعال یا نصب شده اند (به عنوان مثال پورت های غیر ضروری، خدمات، صفحات، حساب ها یا امتیازات).
  </li>
  <li>
حساب های پیش فرض و گذرواژه های آنها هنوز فعال و بدون تغییر هستند.
  </li>
  <li>
مدیریت خطا نشان دهنده دنبال کردن پشته و یا دیگر پیام‌های خطای زیاد جهت اطلاع رسانی به کاربران است.
  </li>
  <li>
برای سیستم‌های به روز شده، آخرین ویژگی های امنیتی غیرفعال شده و یا به صورت امن پیکربندی نشده است.
  </li>
  <li>
    تنظیمات امنیتی در سرورهای برنامه، چارچوب برنامه (مانند Struts، Spring، ASP.NET، ) کتابخانه‌ها، پایگاه‌های داده و غیره برای ارزش‌های امنیتی تنظیم نشده است.
  </li>
  <li>
سرور هدرهای امنیتی یا دستورالعمل ها را ارسال نمی‌کند یا آنها برای ارزش‌های امنیتی تنظیم نمی‌شوند.
  </li>
  <li>
    این نرم افزار قدیمی‌یا آسیبپذیر است (نگاه کنید به A9:2017 -  استفاده از مولفه‌هایی با آسیب‌پذیری‌های شناخته شده).
  </li>
</ul>


<p dir="rtl" align="right">بدون یک پروسه پیکربندی امنیتی هماهنگ، قابل تکرار، سیستم ها در معرض خطر بیشتری هستند.</p>

## <div dir="rtl" align="right">نحوه پیشگیری از حمله :</div>

<p dir="rtl" align="right">فرآیند نصب امن باید اجرا شود، از جمله:</p>

<ul dir="rtl" align="right">
  <li>
    یک فرایند سخت افزاری تکرارپذیر که باعث گسترش سریع و آسان یک محیط دیگر است که کاملا محافظت می‌شود. توسعه، QA، و محیط های تولید باید همه پیکربندی یکسان، با کلمه عبور مختلف استفاده شده در هر محیط را دارا باشند. این فرایند باید به صورت خودکار برای به حداقل رساندن تلاش لازم برای راه اندازی یک محیط امنیتی جدید باشد.
  </li>
  <li>
    حداقل پلت فرم بدون هیچ گونه ویژگی، اجزای، اسناد و نمونه های غیر ضروری. ویژگی ها و چارچوب های استفاده نشده را حذف یا نصب کنید.
  </li>
  <li>
    یک وظیفه برای بررسی و به روز کردن پیکربندی مربوط به همه یادداشت های امنیتی، به روز رسانی ها و وصله های امنیتی به عنوان بخشی از فرآیند مدیریت وصله (A9:2017 - استفاده از مولفه‌هایی با آسیب‌پذیری‌های شناخته شده  را ببینید). به ویژه بررسی مجوزهای ذخیره سازی ابر (به عنوان مثال S3 bucket permissions).
  </li>
  <li>
یک معماری نرم افزار قوی که جداسازی موثر و امن بین اجزاء را با بخش بندی، کانتینریزاسیون یا گروه های امنیتی ابری فراهم می‌کند.  </li>
  <li>
    ارسال دستورات امنیتی به مشتریان، برای مثال <a href="https://owasp.org/www-project-secure-headers/">سربرگ های امنیتی</a>. 
  </li>
  <li>
یک فرایند خودکار برای بررسی تأثیر تنظیمات و پیکربندی در همه محیط ها.  </li>
</ul>

## <div dir="rtl" align="right">نمونه سناریو های حمله</div>

<p dir="rtl" align="right"><strong>سناریو # 1: </strong>سرور برنامه همراه با برنامه های نمونه به طور خودکار نصب شده و حذف نشده است. این برنامه های نمونه دارای نقص امنیتی هستند که مهاجمان از سرور برای به خطر انداختن امنیت استفاده می‌کنند. اگر یکی از این برنامه های کاربردی کنسول مدیریت باشد، و حسابهای پیشفرض تغییر داده نشده باشند، مهاجم با گذرواژه‌های پیشفرض وارد سیستم می‌شود و آن را تصرف می‌کند.</p>

<p dir="rtl" align="right"><strong>سناریو # 2: </strong>لیست کردن دایرکتوری در سرور غیر فعال نشده است. مهاجم می‌فهمد که به سادگی می‌تواند دایرکتوری ها را لیست کند. مهاجم کلاس های جاوا کامپایل شده را پیدا می‌کند و آنها را دانلود می‌کند و تجزیه و تحلیل می‌کند و برای بازبینی کد از مهندسی معکوس استفاده می‌کند. و در نهایت یک نقص کنترل دسترسی جدی در برنامه کاربردی پیدا می‌کند.</p>

<p dir="rtl" align="right"><strong>سناریو # 3: </strong>پیکربندی سرور برنامه اجازه می‌دهد تا جزئیات پیام های خطا، مثلاً ردیابی پشته ها، به کاربران بازگردانده شود. این به طور بالقوه نشت اطلاعات حساس مثل نسخه های اجزاء که آسیب پذیر شناخته شده‌اند را شامل می‌شود.</p>

<p dir="rtl" align="right"><strong>سناریو # 4:</strong>ارائه دهنده خدمات ابری دارای مجوزهای به اشتراک گذاری است که توسط سایر کاربران CSP از اینترنت قابل مشاهده است. این موضوع این اجازه را می‌دهد که اطلاعات حساس ذخیره شده در ذخیره ابری،  قابل دسترسی باشند.</p>

## <div dir="rtl" align="right">منابع</div>

### <div dir="rtl" align="right">OWASP</div>

* [OWASP Testing Guide: Configuration Management](https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/02-Configuration_and_Deployment_Management_Testing/README)
* [OWASP Testing Guide: Testing for Error Codes](https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/08-Testing_for_Error_Handling/README)
* [OWASP Security Headers Project](https://owasp.org/www-project-secure-headers/)

<p dir="rtl" align="right">برای نیازمندیهای بیشتر در این زمینه ، استاندارد تایید امنیت برنامه کاربردی را ببینید .<a href="https://github.com/OWASP/ASVS/blob/v4.0.2/4.0/en/0x22-V14-Config.md">V19 Configuration</a></p>

### <div dir="rtl" align="right">خارجی</div>

* [NIST Guide to General Server Hardening](https://csrc.nist.gov/publications/detail/sp/800-123/final)
* [CWE-2: Environmental Security Flaws](https://cwe.mitre.org/data/definitions/2.html)
* [CWE-16: Configuration](https://cwe.mitre.org/data/definitions/16.html)
* [CWE-388: Error Handling](https://cwe.mitre.org/data/definitions/388.html)
* [CIS Security Configuration Guides/Benchmarks](https://www.cisecurity.org/cis-benchmarks/)
* [Amazon S3 Bucket Discovery and Enumeration](https://blog.websecurify.com/2017/10/aws-s3-bucket-discovery.html)
